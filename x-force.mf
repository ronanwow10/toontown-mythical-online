import%20__builtin__%0Aimport%20os%0A%0A__builtin__.process%20%3D%20%27client%27%0A%0A%23%20Temporary%20hack%20patch%3A%0A__builtin__.__dict__.update(__import__(%27pandac.PandaModules%27%2C%20fromlist%20%3D%20%5B%27*%27%5D).__dict__)%0Afrom%20direct.extensions_native%20import%20HTTPChannel_extensions%0Afrom%20direct.extensions_native%20import%20Mat3_extensions%0Afrom%20direct.extensions_native%20import%20VBase3_extensions%0Afrom%20direct.extensions_native%20import%20VBase4_extensions%0Afrom%20direct.extensions_native%20import%20NodePath_extensions%0Afrom%20panda3d.core%20import%20loadPrcFile%0A%0A%23%20if%20__debug__%3A%0A%23%20%20%20%20%20loadPrcFile(%27config%2Fgeneral.prc%27)%0A%23%20%20%20%20%20loadPrcFile(%27config%2Frelease%2Fdev.prc%27)%0A%23%20else%3A%0A%23%20config%20%3D%20niraidata.CONFIG%0A%23%20config%20%3D%20aes.decrypt(config%2C%20key%2C%20iv)%0A%0Aconfig%20%3D%20%22%22%22%23%20Window%20settings%3A%0Awindow-title%20Project%20Altis%20%5BBETA%201.2.0%5D%0Awin-origin%20-2%20-2%0Aicon-filename%20phase_3%2Fetc%2Ficon.ico%0Acursor-filename%20phase_3%2Fetc%2Ftoonmono.cur%0Ashow-frame-rate-meter%20%23f%0A%23%20Altis%20Engine%203.0%0Awant-vive%20%23f%0Awant-android%20%23f%0Awant-headless%20%23f%0Awant-live-updates%20%23f%0Awant-cuda%20%23t%0Aloader-num-threads%2025%0A%23%20Debug%0Adefault-directnotify-level%20info%0Anotify-level-DistributedNPCScientistAI%20info%0Anotify-level-DistributedPetAI%20info%0Awant-pstats%20%23f%0A%23%20Audio%3A%0Aaudio-library-name%20p3fmod_audio%0A%23%20Graphics%3A%0Aaux-display%20pandagl%0Aaux-display%20pandadx9%0Aaux-display%20p3tinydisplay%0A%23%20Models%3A%0Amodel-cache-models%20%23f%0Amodel-cache-textures%20%23f%0Adefault-model-extension%20.bam%0A%23%20Performance%0Asmooth-enable-prediction%201%0Asmooth-enable-smoothing%201%0Asmooth-lag%200.4%0Asmooth-max-future%201.0%0Asmooth-min-suggest-resync%200%0Aaverage-frame-rate-interval%2060.0%0Aclock-frame-rate%2060.0%0A%23%20Preferences%3A%0Apreferences-filename%20preferences.json%0A%23%20Backups%3A%0Abackups-filepath%20backups%2F%0Abackups-extension%20.json%0A%23%20Server%3A%0Aserver-timezone%20EST%2FEDT%2F-5%0Aserver-port%207198%0Aaccount-bridge-filename%20astron%2Fdatabases%2Faccount-bridge.db%0A%23%20Performance%3A%0Async-video%20%23f%0Atexture-power-2%20none%0Agl-check-errors%20%23f%0Agarbage-collect-states%20%23f%0A%23%20Egg%20object%20types%3A%0Aegg-object-type-barrier%20%3CScalar%3E%20collide-mask%20%7B%200x01%20%7D%20%3CCollide%3E%20%7B%20Polyset%20descend%20%7D%0Aegg-object-type-trigger%20%3CScalar%3E%20collide-mask%20%7B%200x01%20%7D%20%3CCollide%3E%20%7B%20Polyset%20descend%20intangible%20%7D%0Aegg-object-type-sphere%20%3CScalar%3E%20collide-mask%20%7B%200x01%20%7D%20%3CCollide%3E%20%7B%20Sphere%20descend%20%7D%0Aegg-object-type-trigger-sphere%20%3CScalar%3E%20collide-mask%20%7B%200x01%20%7D%20%3CCollide%3E%20%7B%20Sphere%20descend%20intangible%20%7D%0Aegg-object-type-floor%20%3CScalar%3E%20collide-mask%20%7B%200x02%20%7D%20%3CCollide%3E%20%7B%20Polyset%20descend%20%7D%0Aegg-object-type-dupefloor%20%3CScalar%3E%20collide-mask%20%7B%200x02%20%7D%20%3CCollide%3E%20%7B%20Polyset%20keep%20descend%20%7D%0Aegg-object-type-camera-collide%20%3CScalar%3E%20collide-mask%20%7B%200x04%20%7D%20%3CCollide%3E%20%7B%20Polyset%20descend%20%7D%0Aegg-object-type-camera-collide-sphere%20%3CScalar%3E%20collide-mask%20%7B%200x04%20%7D%20%3CCollide%3E%20%7B%20Sphere%20descend%20%7D%0Aegg-object-type-camera-barrier%20%3CScalar%3E%20collide-mask%20%7B%200x05%20%7D%20%3CCollide%3E%20%7B%20Polyset%20descend%20%7D%0Aegg-object-type-camera-barrier-sphere%20%3CScalar%3E%20collide-mask%20%7B%200x05%20%7D%20%3CCollide%3E%20%7B%20Sphere%20descend%20%7D%0Aegg-object-type-model%20%3CModel%3E%20%7B%201%20%7D%0Aegg-object-type-dcs%20%3CDCS%3E%20%7B%201%20%7D%0A%23%20Safe%20zones%3A%0Awant-safe-zones%20%23t%0Awant-toontown-central%20%23t%0Awant-donalds-dock%20%23t%0Awant-daisys-garden%20%23t%0Awant-minnies-melodyland%20%23t%0Awant-the-burrrgh%20%23t%0Awant-donalds-dreamland%20%23t%0Awant-goofy-speedway%20%23t%0Awant-outdoor-zone%20%23t%0Awant-golf-zone%20%23t%0A%23%20Weather%20system%0Awant-weather%20%23f%0A%23%20Options%20Page%0Achange-display-settings%20%23t%0Achange-display-api%20%23t%0A%23%20Safe%20zone%20settings%3A%0Awant-treasure-planners%20%23t%0Awant-suit-planners%20%23t%0Awant-butterflies%20%23f%0A%23%20Classic%20characters%3A%0Awant-classic-chars%20%23f%0Awant-mickey%20%23f%0Awant-donald-dock%20%23f%0Awant-daisy%20%23f%0Awant-minnie%20%23f%0Awant-pluto%20%23f%0Awant-donald-dreamland%20%23f%0Awant-chip-and-dale%20%23f%0Awant-goofy%20%23f%0A%23%20Trolley%20minigames%3A%0Awant-minigames%20%23t%0Awant-photo-game%20%23f%0Awant-travel-game%20%23f%0A%23%20Picnic%20table%20board%20games%3A%0Awant-game-tables%20%23f%0A%23%20Cog%20Battles%0Abase-xp-multiplier%205.0%0A%23%20Cog%20headquarters%3A%0Awant-cog-headquarters%20%23t%0Awant-sellbot-headquarters%20%23t%0Awant-cashbot-headquarters%20%23t%0Awant-lawbot-headquarters%20%23t%0Awant-bossbot-headquarters%20%23t%0A%23%20Cashbot%20boss%3A%0Awant-resistance-toonup%20%23f%0Awant-resistance-restock%20%23f%0A%23%20Cog%20buildings%3A%0Awant-cogbuildings%20%23t%0A%23%20Optional%3A%0Ashow-total-population%20%23f%0Awant-mat-all-tailors%20%23t%0Awant-long-pattern-game%20%23f%0Ashow-population%20%23t%0Ashow-total-population%20%23t%0A%23%20Animated%20Props%0Azero-pause-mult%201.0%0A%23%20Interactive%20Props%0Arandomize-interactive-idles%20%23t%0Ainteractive-prop-random-idles%20%23t%0Ainteractive-prop-info%20%23f%0Aprops-buff-battles%20%23t%0Aprop-idle-pause-time%200.0%0A%23%20Events%0Awant-charity-screen%20%23t%0A%23%20Developer%20options%3A%0Awant-dev%20%23f%0Awant-pstats%20%23f%0Awant-directtools%20%23f%0Awant-tk%20%23f%0A%23%20Holidays%0Aactive-holidays%2064%2C%2065%2C%2066%20%23128%2C%20116%2C%2063%0A%23%20Temporary%3A%0Awant-old-fireworks%20%23t%0A%23%20Live%20updates%3A%0Awant-live-updates%20%23t%0A%23%20Server%3A%0Aserver-version%20TTPA-Beta-1.2.0%0Ashard-low-pop%2050%0Ashard-mid-pop%2080%0A%23%20Core%20features%3A%0Awant-pets%20%23t%0Awant-parties%20%23f%0Awant-cogdominiums%20%23t%0Awant-achievements%20%23t%0A%23%20Chat%3A%0Awant-whitelist%20%23t%0A%23%20Cashbot%20boss%3A%0Awant-resistance-toonup%20%23t%0Awant-resistance-restock%20%23t%0A%23%20Developer%20options%3A%0Awant-dev%20%23f%0A%22%22%22%0A%0Aproduction_model_path%20%3D%20%27%2F%27%0Aif(os.environ.get(%27model-path%27%2C%20production_model_path)%20%3D%3D%20production_model_path)%3A%0A%20%20%20%20config%20%2B%3D%20%27%5Cnmodel-path%20%27%20%2B%20production_model_path%0Aelse%3A%0A%20%20%20%20config%20%2B%3D%20%27%5Cnmodel-path%20%27%20%2B%20os.environ.get(%27model-path%27%2C%20production_model_path)%0A%20%0A%0A%0Aimport%20sys%0Afrom%20panda3d.core%20import%20*%0Aimport%20StringIO%0Aio%20%3D%20StringIO.StringIO(config)%0Avfs%20%3D%20VirtualFileSystem.getGlobalPtr()%0Aimport%20glob%0A%0Afor%20line%20in%20io.readlines()%3A%0A%20%20%20%20%23%20check%20if%20the%20current%20line%20is%20a%20comment...%0A%20%20%20%20if%20line.startswith(%27%23%27)%3A%0A%20%20%20%20%20%20%20%20continue%0A%0A%20%20%20%20%23%20print%20line%0A%20%20%20%20%23%20load%20the%20prc%20file%20value%0A%20%20%20%20loadPrcFileData(%27%27%2C%20line)%0Adel%20config%0A%0Afrom%20direct.directnotify.DirectNotifyGlobal%20import%20directNotify%0Afrom%20otp.settings.Settings%20import%20Settings%0A%0Anotify%20%3D%20directNotify.newCategory(%27AltisClient%27)%0Anotify.setInfo(True)%0A%0ApreferencesFilename%20%3D%20ConfigVariableString(%0A%20%20%20%20%27preferences-filename%27%2C%20%27preferences.json%27).getValue()%0Anotify.info(%27Reading%20%25s...%27%20%25%20preferencesFilename)%0A__builtin__.settings%20%3D%20Settings(preferencesFilename)%0Afrom%20toontown.settings%20import%20ToontownSettings%0A__builtin__.ttsettings%20%3D%20ToontownSettings%0A%0Afor%20setting%20in%20ttsettings.DefaultSettings%3A%0A%20%20%20%20if%20setting%20not%20in%20settings%3A%0A%20%20%20%20%20%20%20%20settings%5Bsetting%5D%20%3D%20ttsettings.DefaultSettings%5Bsetting%5D%0A%0AloadPrcFileData(%27Settings%3A%20res%27%2C%20%27win-size%20%25d%20%25d%27%20%25%20tuple(settings.get(%27res%27%2C%20(1280%2C%20720))))%0AloadPrcFileData(%27Settings%3A%20fullscreen%27%2C%20%27fullscreen%20%25s%27%20%25%20settings%5B%27fullscreen%27%5D)%0AloadPrcFileData(%27Settings%3A%20music%27%2C%20%27audio-music-active%20%25s%27%20%25%20settings%5B%27music%27%5D)%0AloadPrcFileData(%27Settings%3A%20sfx%27%2C%20%27audio-sfx-active%20%25s%27%20%25%20settings%5B%27sfx%27%5D)%0AloadPrcFileData(%27Settings%3A%20musicVol%27%2C%20%27audio-master-music-volume%20%25s%27%20%25%20settings%5B%27musicVol%27%5D)%0AloadPrcFileData(%27Settings%3A%20sfxVol%27%2C%20%27audio-master-sfx-volume%20%25s%27%20%25%20settings%5B%27sfxVol%27%5D)%0AloadPrcFileData(%27Settings%3A%20loadDisplay%27%2C%20%27load-display%20%25s%27%20%25%20settings%5B%27loadDisplay%27%5D)%0AloadPrcFileData(%27Settings%3A%20toonChatSounds%27%2C%20%27toon-chat-sounds%20%25s%27%20%25%20settings%5B%27toonChatSounds%27%5D)%0AloadPrcFileData(%27%27%2C%20%27texture-anisotropic-degree%20%25d%27%20%25%20settings%5B%27anisotropic-filtering%27%5D)%0AloadPrcFileData(%27%27%2C%20%27framebuffer-multisample%20%25s%27%20%25%20settings%5B%27anti-aliasing%27%5D)%0AloadPrcFileData(%27%27%2C%20%27sync-video%20%25s%27%20%25%20settings%5B%27vertical-sync%27%5D)%0A%0Avfs%20%3D%20VirtualFileSystem.getGlobalPtr()%0ADefaultPhases%20%3D%20(3%2C%203.5%2C%204%2C%205%2C%205.5%2C%206%2C%207%2C%208%2C%209%2C%2010%2C%2011%2C%2012%2C%2013)%0Aimport%20glob%0Anotify.info(%22Loading%20Default%20Pack...%22)%0Afor%20file%20in%20glob.glob(%27resources%2Fdefault%2F*.mf%27)%3A%0A%20%20%20%20if%20float(file.replace(%27.mf%27%2C%20%27%27).replace(%27resources%2Fdefault%5Cphase_%27%2C%20%27%27))%20in%20DefaultPhases%3A%0A%20%20%20%20%20%20%20%20mf%20%3D%20Multifile()%0A%20%20%20%20%20%20%20%20mf.openReadWrite(Filename(file))%0A%20%20%20%20%20%20%20%20names%20%3D%20mf.getSubfileNames()%0A%20%20%20%20%20%20%20%20vfs.mount(mf%2C%20Filename(%27%2F%27)%2C%200)%0A%20%20%20%20%20%20%20%20notify.info(%27Successfully%20Mounted%3A%27%20%2B%20file)%0Anotify.info(%22Default%20Pack%20Loaded!%22)%0Afrom%20toontown.toonbase.ContentPackManager%20import%20ContentPackManager%0A__builtin__.ContentPackMgr%20%3D%20ContentPackManager()%0AContentPackMgr.loadAll()%0A%0AloadDisplay%20%3D%20settings.get(%27loadDisplay%27%2C%20%27pandagl%27)%0AloadPrcFileData(%27%27%2C%20%27load-display%20%25s%27%20%25%20settings%5B%27loadDisplay%27%5D)%0A%0Aimport%20os%0Aimport%20time%0Aimport%20sys%0Aimport%20random%0Aimport%20__builtin__%0A%0Atry%3A%0A%20%20%20%20from%20toontown.launcher.TTALauncher%20import%20TTALauncher%0A%20%20%20%20launcher%20%3D%20TTALauncher()%0A%20%20%20%20__builtin__.launcher%20%3D%20launcher%0Aexcept%20Exception%20as%20e%3A%0A%20%20%20%20raise%20(e)%0A%0Aif%20launcher.isDummy()%3A%0A%20%20%20%20http%20%3D%20HTTPClient()%0Aelse%3A%0A%20%20%20%20http%20%3D%20launcher.http%0A%0Afrom%20toontown.toonbase%20import%20ToontownGlobals%0AtempLoader%20%3D%20Loader()%0A%0Afrom%20direct.gui%20import%20DirectGuiGlobals%0Afrom%20direct.gui.DirectGui%20import%20*%0A%0Afrom%20toontown.pgui%20import%20DirectGuiGlobals%20as%20PGUIGlobals%0A%0ADirectGuiGlobals.setDefaultFontFunc(ToontownGlobals.getInterfaceFont)%0APGUIGlobals.setDefaultFontFunc(ToontownGlobals.getInterfaceFont)%0Alauncher.setPandaErrorCode(7)%0Anotify.info(%27Loading%20AltisBase...%27)%0Afrom%20toontown.toonbase%20import%20ToonBase%0AToonBase.ToonBase()%0Afrom%20panda3d.core%20import%20*%0Aif%20base.win%20is%20None%3A%0A%20%20%20%20notify.error(%27Unable%20to%20open%20window%3B%20aborting.%27)%0A%0Alauncher.setPandaErrorCode(0)%0Alauncher.setPandaWindowOpen()%0AConfigVariableDouble(%27decompressor-step-time%27).setValue(0.01)%0AConfigVariableDouble(%27extractor-step-time%27).setValue(0.01)%0AbackgroundNode%20%3D%20tempLoader.loadSync(Filename(%27phase_3%2Fmodels%2Fgui%2Floading-background%27))%0AbackgroundNodePath%20%3D%20aspect2d.attachNewNode(backgroundNode%2C%200)%0AbackgroundNodePath.setPos(0.0%2C%200.0%2C%200.0)%0AbackgroundNodePath.setScale(render2d%2C%20VBase3(1))%0AbackgroundNodePath.find(%27**%2Ffg%27).hide()%0Alogo%20%3D%20OnscreenImage(%0A%20%20%20%20image%20%3D%20%27phase_3%2Fmaps%2Ftoontown-logo.png%27%2C%0A%20%20%20%20scale%20%3D%20(1%20%2F%20(4.0%20%2F%203.0)%2C%201%2C%201%20%2F%20(4.0%20%2F%203.0))%2C%0A%20%20%20%20pos%20%3D%20backgroundNodePath.find(%27**%2Ffg%27).getPos())%0Alogo.setTransparency(TransparencyAttrib.MAlpha)%0Alogo.setBin(%27fixed%27%2C%2020)%0Alogo.reparentTo(backgroundNodePath)%0AbackgroundNodePath.find(%27**%2Fbg%27).setBin(%27fixed%27%2C%2010)%0Abase.graphicsEngine.renderFrame()%0ADirectGuiGlobals.setDefaultRolloverSound(base.loader.loadSfx(%27phase_3%2Faudio%2Fsfx%2FGUI_rollover.ogg%27))%0ADirectGuiGlobals.setDefaultClickSound(base.loader.loadSfx(%27phase_3%2Faudio%2Fsfx%2FGUI_create_toon_fwd.ogg%27))%0ADirectGuiGlobals.setDefaultDialogGeom(loader.loadModel(%27phase_3%2Fmodels%2Fgui%2Fdialog_box_gui%27))%0APGUIGlobals.setDefaultRolloverSound(base.loadSfx(%27phase_3%2Faudio%2Fsfx%2FGUI_rollover.ogg%27))%0APGUIGlobals.setDefaultClickSound(base.loadSfx(%27phase_3%2Faudio%2Fsfx%2FGUI_create_toon_fwd.ogg%27))%0APGUIGlobals.setDefaultDialogGeom(loader.loadModel(%27phase_3%2Fmodels%2Fgui%2Fdialog_box_gui%27))%0Afrom%20toontown.toonbase%20import%20TTLocalizer%0Afrom%20otp.otpbase%20import%20OTPGlobals%0AOTPGlobals.setDefaultProductPrefix(TTLocalizer.ProductPrefix)%0A%0A%23%20For%20Devs%20only.%20(The%20below)%0A%27%27%27from%20direct.stdpy%20import%20threading%2C%20thread%0Adef%20__inject_wx(_)%3A%0A%20%20%20%20code%20%3D%20textbox.GetValue()%0A%20%20%20%20exec%20(code%2C%20globals())%0Adef%20openInjector_wx()%3A%0A%20%20%20%20import%20wx%0A%20%20%20%20app%20%3D%20wx.App(redirect%20%3D%20False)%0A%20%20%20%20frame%20%3D%20wx.Frame(None%2C%20title%20%3D%20%22TTPA%20Dev%20Injector%22%2C%20size%3D(640%2C%20400)%2C%20style%3Dwx.SYSTEM_MENU%20%7C%20wx.CAPTION%20%7C%20wx.CLOSE_BOX%20%7C%20wx.MINIMIZE_BOX)%0A%20%20%20%20panel%20%3D%20wx.Panel(frame)%0A%20%20%20%20button%20%3D%20wx.Button(parent%20%3D%20panel%2C%20id%20%3D%20-1%2C%20label%20%3D%20%22Inject%22%2C%20size%20%3D%20(50%2C%2020)%2C%20pos%20%3D%20(295%2C%200))%0A%20%20%20%20global%20textbox%0A%20%20%20%20textbox%20%3D%20wx.TextCtrl(parent%20%3D%20panel%2C%20id%20%3D%20-1%2C%20pos%20%3D%20(20%2C%2022)%2C%20size%20%3D%20(600%2C%20340)%2C%20style%20%3D%20wx.TE_MULTILINE)%0A%20%20%20%20frame.Bind(wx.EVT_BUTTON%2C%20__inject_wx%2C%20button)%0A%20%20%20%20frame.Show()%0A%20%20%20%20app.SetTopWindow(frame)%0A%20%20%20%20textbox.AppendText(%22%20%22)%0A%20%20%20%20threading.Thread(target%20%3D%20app.MainLoop).start()%0AopenInjector_wx()%27%27%27%0A%0Aif%20base.musicManagerIsValid%3A%0A%20%20%20%20music%20%3D%20base.loader.loadMusic(%27phase_3%2Faudio%2Fbgm%2Ftt_theme.ogg%27)%0A%20%20%20%20if%20music%3A%0A%20%20%20%20%20%20%20%20music.setLoop(1)%0A%20%20%20%20%20%20%20%20music.setVolume(0.9)%0A%20%20%20%20%20%20%20%20music.play()%0A%20%20%20%20notify.info(%27Loading%20the%20default%20GUI%20sounds...%27)%0A%20%20%20%20DirectGuiGlobals.setDefaultRolloverSound(base.loader.loadSfx(%27phase_3%2Faudio%2Fsfx%2FGUI_rollover.ogg%27))%0A%20%20%20%20DirectGuiGlobals.setDefaultClickSound(base.loader.loadSfx(%27phase_3%2Faudio%2Fsfx%2FGUI_create_toon_fwd.ogg%27))%0Aelse%3A%0A%20%20%20%20music%20%3D%20None%0Afrom%20toontown.toonbase%20import%20ToontownLoader%0Afrom%20direct.gui.DirectGui%20import%20*%0AserverVersion%20%3D%20base.config.GetString(%27server-version%27%2C%20%27no_version_set%27)%0A%0A%27%27%27%0ALet%27s%20have%20these%20here%20so%20you%20can%20tell%20if%20dev%20or%20debug%20mode%20is%20enabled%20or%20not%0Aeasily.%0A%27%27%27%0Aif%20__dev__%3A%0A%20%20%20%20serverVersionText%20%3D%20serverVersion%20%2B%20%22-dev%22%0Aelif%20__debug__%3A%0A%20%20%20%20serverVersionText%20%3D%20serverVersion%20%2B%20%22-debug%22%0Aelse%3A%0A%20%20%20%20serverVersionText%20%3D%20serverVersion%0A%0Aversion%20%3D%20OnscreenText(serverVersionText%2C%20pos%20%3D%20(-1.3%2C%20-0.975)%2C%20scale%20%3D%200.06%2C%20fg%20%3D%20Vec4(0%2C%200%2C%200%2C%201)%2C%20align%20%3D%20TextNode.ALeft)%0Aversion.setPos(0.03%2C%200.03)%0Aversion.reparentTo(base.a2dBottomLeft)%0Afrom%20toontown.suit%20import%20Suit%0ASuit.loadModels()%0Aloader.beginBulkLoad(%27init%27%2C%20TTLocalizer.LoaderLabel%2C%20138%2C%200%2C%20TTLocalizer.TIP_NONE%2C%200)%0Afrom%20toontown.toonbase.ToonBaseGlobal%20import%20*%0Afrom%20direct.showbase.MessengerGlobal%20import%20*%0Afrom%20toontown.distributed%20import%20ToontownClientRepository%0Acr%20%3D%20ToontownClientRepository.ToontownClientRepository(serverVersion%2C%20launcher)%0Acr.music%20%3D%20music%0Adel%20music%0Abase.initNametagGlobals()%0Abase.cr%20%3D%20cr%0Aloader.endBulkLoad(%27init%27)%0Afrom%20otp.friends%20import%20FriendManager%0Afrom%20otp.distributed.OtpDoGlobals%20import%20*%0Acr.generateGlobalObject(OTP_DO_ID_FRIEND_MANAGER%2C%20%27FriendManager%27)%0Aif%20not%20launcher.isDummy()%3A%0A%20%20%20%20base.startShow(cr%2C%20launcher.getGameServer())%0Aelse%3A%0A%20%20%20%20base.startShow(cr)%0AbackgroundNodePath.reparentTo(hidden)%0AbackgroundNodePath.removeNode()%0Adel%20backgroundNodePath%0Adel%20backgroundNode%0Adel%20tempLoader%0Aversion.cleanup()%0Adel%20version%0Abase.loader%20%3D%20base.loader%0A__builtin__.loader%20%3D%20base.loader%0AautoRun%20%3D%20ConfigVariableBool(%27toontown-auto-run%27%2C%201)%0A%0Abase.run()%0A
import%20__builtin__%0Aimport%20os%0A%0A__builtin__.process%20%3D%20%27client%27%0A%0A%23%20Temporary%20hack%20patch%3A%0A__builtin__.__dict__.update(__import__(%27pandac.PandaModules%27%2C%20fromlist%20%3D%20%5B%27*%27%5D).__dict__)%0Afrom%20direct.extensions_native%20import%20HTTPChannel_extensions%0Afrom%20direct.extensions_native%20import%20Mat3_extensions%0Afrom%20direct.extensions_native%20import%20VBase3_extensions%0Afrom%20direct.extensions_native%20import%20VBase4_extensions%0Afrom%20direct.extensions_native%20import%20NodePath_extensions%0Afrom%20panda3d.core%20import%20loadPrcFile%0A%0A%23%20if%20__debug__%3A%0A%23%20%20%20%20%20loadPrcFile(%27config%2Fgeneral.prc%27)%0A%23%20%20%20%20%20loadPrcFile(%27config%2Frelease%2Fdev.prc%27)%0A%23%20else%3A%0A%23%20config%20%3D%20niraidata.CONFIG%0A%23%20config%20%3D%20aes.decrypt(config%2C%20key%2C%20iv)%0A%0Aconfig%20%3D%20%22%22%22%23%20Window%20settings%3A%0Awindow-title%20Project%20Altis%20%5BBETA%201.2.0%5D%0Awin-origin%20-2%20-2%0Aicon-filename%20phase_3%2Fetc%2Ficon.ico%0Acursor-filename%20phase_3%2Fetc%2Ftoonmono.cur%0Ashow-frame-rate-meter%20%23f%0A%23%20Altis%20Engine%203.0%0Awant-vive%20%23f%0Awant-android%20%23f%0Awant-headless%20%23f%0Awant-live-updates%20%23f%0Awant-cuda%20%23t%0Aloader-num-threads%2025%0A%23%20Debug%0Adefault-directnotify-level%20info%0Anotify-level-DistributedNPCScientistAI%20info%0Anotify-level-DistributedPetAI%20info%0Awant-pstats%20%23f%0A%23%20Audio%3A%0Aaudio-library-name%20p3fmod_audio%0A%23%20Graphics%3A%0Aaux-display%20pandagl%0Aaux-display%20pandadx9%0Aaux-display%20p3tinydisplay%0A%23%20Models%3A%0Amodel-cache-models%20%23f%0Amodel-cache-textures%20%23f%0Adefault-model-extension%20.bam%0A%23%20Performance%0Asmooth-enable-prediction%201%0Asmooth-enable-smoothing%201%0Asmooth-lag%200.4%0Asmooth-max-future%201.0%0Asmooth-min-suggest-resync%200%0Aaverage-frame-rate-interval%2060.0%0Aclock-frame-rate%2060.0%0A%23%20Preferences%3A%0Apreferences-filename%20preferences.json%0A%23%20Backups%3A%0Abackups-filepath%20backups%2F%0Abackups-extension%20.json%0A%23%20Server%3A%0Aserver-timezone%20EST%2FEDT%2F-5%0Aserver-port%207198%0Aaccount-bridge-filename%20astron%2Fdatabases%2Faccount-bridge.db%0A%23%20Performance%3A%0Async-video%20%23f%0Atexture-power-2%20none%0Agl-check-errors%20%23f%0Agarbage-collect-states%20%23f%0A%23%20Egg%20object%20types%3A%0Aegg-object-type-barrier%20%3CScalar%3E%20collide-mask%20%7B%200x01%20%7D%20%3CCollide%3E%20%7B%20Polyset%20descend%20%7D%0Aegg-object-type-trigger%20%3CScalar%3E%20collide-mask%20%7B%200x01%20%7D%20%3CCollide%3E%20%7B%20Polyset%20descend%20intangible%20%7D%0Aegg-object-type-sphere%20%3CScalar%3E%20collide-mask%20%7B%200x01%20%7D%20%3CCollide%3E%20%7B%20Sphere%20descend%20%7D%0Aegg-object-type-trigger-sphere%20%3CScalar%3E%20collide-mask%20%7B%200x01%20%7D%20%3CCollide%3E%20%7B%20Sphere%20descend%20intangible%20%7D%0Aegg-object-type-floor%20%3CScalar%3E%20collide-mask%20%7B%200x02%20%7D%20%3CCollide%3E%20%7B%20Polyset%20descend%20%7D%0Aegg-object-type-dupefloor%20%3CScalar%3E%20collide-mask%20%7B%200x02%20%7D%20%3CCollide%3E%20%7B%20Polyset%20keep%20descend%20%7D%0Aegg-object-type-camera-collide%20%3CScalar%3E%20collide-mask%20%7B%200x04%20%7D%20%3CCollide%3E%20%7B%20Polyset%20descend%20%7D%0Aegg-object-type-camera-collide-sphere%20%3CScalar%3E%20collide-mask%20%7B%200x04%20%7D%20%3CCollide%3E%20%7B%20Sphere%20descend%20%7D%0Aegg-object-type-camera-barrier%20%3CScalar%3E%20collide-mask%20%7B%200x05%20%7D%20%3CCollide%3E%20%7B%20Polyset%20descend%20%7D%0Aegg-object-type-camera-barrier-sphere%20%3CScalar%3E%20collide-mask%20%7B%200x05%20%7D%20%3CCollide%3E%20%7B%20Sphere%20descend%20%7D%0Aegg-object-type-model%20%3CModel%3E%20%7B%201%20%7D%0Aegg-object-type-dcs%20%3CDCS%3E%20%7B%201%20%7D%0A%23%20Safe%20zones%3A%0Awant-safe-zones%20%23t%0Awant-toontown-central%20%23t%0Awant-donalds-dock%20%23t%0Awant-daisys-garden%20%23t%0Awant-minnies-melodyland%20%23t%0Awant-the-burrrgh%20%23t%0Awant-donalds-dreamland%20%23t%0Awant-goofy-speedway%20%23t%0Awant-outdoor-zone%20%23t%0Awant-golf-zone%20%23t%0A%23%20Weather%20system%0Awant-weather%20%23f%0A%23%20Options%20Page%0Achange-display-settings%20%23t%0Achange-display-api%20%23t%0A%23%20Safe%20zone%20settings%3A%0Awant-treasure-planners%20%23t%0Awant-suit-planners%20%23t%0Awant-butterflies%20%23f%0A%23%20Classic%20characters%3A%0Awant-classic-chars%20%23f%0Awant-mickey%20%23f%0Awant-donald-dock%20%23f%0Awant-daisy%20%23f%0Awant-minnie%20%23f%0Awant-pluto%20%23f%0Awant-donald-dreamland%20%23f%0Awant-chip-and-dale%20%23f%0Awant-goofy%20%23f%0A%23%20Trolley%20minigames%3A%0Awant-minigames%20%23t%0Awant-photo-game%20%23f%0Awant-travel-game%20%23f%0A%23%20Picnic%20table%20board%20games%3A%0Awant-game-tables%20%23f%0A%23%20Cog%20Battles%0Abase-xp-multiplier%205.0%0A%23%20Cog%20headquarters%3A%0Awant-cog-headquarters%20%23t%0Awant-sellbot-headquarters%20%23t%0Awant-cashbot-headquarters%20%23t%0Awant-lawbot-headquarters%20%23t%0Awant-bossbot-headquarters%20%23t%0A%23%20Cashbot%20boss%3A%0Awant-resistance-toonup%20%23f%0Awant-resistance-restock%20%23f%0A%23%20Cog%20buildings%3A%0Awant-cogbuildings%20%23t%0A%23%20Optional%3A%0Ashow-total-population%20%23f%0Awant-mat-all-tailors%20%23t%0Awant-long-pattern-game%20%23f%0Ashow-population%20%23t%0Ashow-total-population%20%23t%0A%23%20Animated%20Props%0Azero-pause-mult%201.0%0A%23%20Interactive%20Props%0Arandomize-interactive-idles%20%23t%0Ainteractive-prop-random-idles%20%23t%0Ainteractive-prop-info%20%23f%0Aprops-buff-battles%20%23t%0Aprop-idle-pause-time%200.0%0A%23%20Events%0Awant-charity-screen%20%23t%0A%23%20Developer%20options%3A%0Awant-dev%20%23f%0Awant-pstats%20%23f%0Awant-directtools%20%23f%0Awant-tk%20%23f%0A%23%20Holidays%0Aactive-holidays%2064%2C%2065%2C%2066%20%23128%2C%20116%2C%2063%0A%23%20Temporary%3A%0Awant-old-fireworks%20%23t%0A%23%20Live%20updates%3A%0Awant-live-updates%20%23t%0A%23%20Server%3A%0Aserver-version%20TTPA-Beta-1.2.0%0Ashard-low-pop%2050%0Ashard-mid-pop%2080%0A%23%20Core%20features%3A%0Awant-pets%20%23t%0Awant-parties%20%23f%0Awant-cogdominiums%20%23t%0Awant-achievements%20%23t%0A%23%20Chat%3A%0Awant-whitelist%20%23t%0A%23%20Cashbot%20boss%3A%0Awant-resistance-toonup%20%23t%0Awant-resistance-restock%20%23t%0A%23%20Developer%20options%3A%0Awant-dev%20%23f%0A%22%22%22%0A%0Aproduction_model_path%20%3D%20%27%2F%27%0Aif(os.environ.get(%27model-path%27%2C%20production_model_path)%20%3D%3D%20production_model_path)%3A%0A%20%20%20%20config%20%2B%3D%20%27%5Cnmodel-path%20%27%20%2B%20production_model_path%0Aelse%3A%0A%20%20%20%20config%20%2B%3D%20%27%5Cnmodel-path%20%27%20%2B%20os.environ.get(%27model-path%27%2C%20production_model_path)%0A%20%0A%0A%0Aimport%20sys%0Afrom%20panda3d.core%20import%20*%0Aimport%20StringIO%0Aio%20%3D%20StringIO.StringIO(config)%0Avfs%20%3D%20VirtualFileSystem.getGlobalPtr()%0Aimport%20glob%0A%0Afor%20line%20in%20io.readlines()%3A%0A%20%20%20%20%23%20check%20if%20the%20current%20line%20is%20a%20comment...%0A%20%20%20%20if%20line.startswith(%27%23%27)%3A%0A%20%20%20%20%20%20%20%20continue%0A%0A%20%20%20%20%23%20print%20line%0A%20%20%20%20%23%20load%20the%20prc%20file%20value%0A%20%20%20%20loadPrcFileData(%27%27%2C%20line)%0Adel%20config%0A%0Afrom%20direct.directnotify.DirectNotifyGlobal%20import%20directNotify%0Afrom%20otp.settings.Settings%20import%20Settings%0A%0Anotify%20%3D%20directNotify.newCategory(%27AltisClient%27)%0Anotify.setInfo(True)%0A%0ApreferencesFilename%20%3D%20ConfigVariableString(%0A%20%20%20%20%27preferences-filename%27%2C%20%27preferences.json%27).getValue()%0Anotify.info(%27Reading%20%25s...%27%20%25%20preferencesFilename)%0A__builtin__.settings%20%3D%20Settings(preferencesFilename)%0Afrom%20toontown.settings%20import%20ToontownSettings%0A__builtin__.ttsettings%20%3D%20ToontownSettings%0A%0Afor%20setting%20in%20ttsettings.DefaultSettings%3A%0A%20%20%20%20if%20setting%20not%20in%20settings%3A%0A%20%20%20%20%20%20%20%20settings%5Bsetting%5D%20%3D%20ttsettings.DefaultSettings%5Bsetting%5D%0A%0AloadPrcFileData(%27Settings%3A%20res%27%2C%20%27win-size%20%25d%20%25d%27%20%25%20tuple(settings.get(%27res%27%2C%20(1280%2C%20720))))%0AloadPrcFileData(%27Settings%3A%20fullscreen%27%2C%20%27fullscreen%20%25s%27%20%25%20settings%5B%27fullscreen%27%5D)%0AloadPrcFileData(%27Settings%3A%20music%27%2C%20%27audio-music-active%20%25s%27%20%25%20settings%5B%27music%27%5D)%0AloadPrcFileData(%27Settings%3A%20sfx%27%2C%20%27audio-sfx-active%20%25s%27%20%25%20settings%5B%27sfx%27%5D)%0AloadPrcFileData(%27Settings%3A%20musicVol%27%2C%20%27audio-master-music-volume%20%25s%27%20%25%20settings%5B%27musicVol%27%5D)%0AloadPrcFileData(%27Settings%3A%20sfxVol%27%2C%20%27audio-master-sfx-volume%20%25s%27%20%25%20settings%5B%27sfxVol%27%5D)%0AloadPrcFileData(%27Settings%3A%20loadDisplay%27%2C%20%27load-display%20%25s%27%20%25%20settings%5B%27loadDisplay%27%5D)%0AloadPrcFileData(%27Settings%3A%20toonChatSounds%27%2C%20%27toon-chat-sounds%20%25s%27%20%25%20settings%5B%27toonChatSounds%27%5D)%0AloadPrcFileData(%27%27%2C%20%27texture-anisotropic-degree%20%25d%27%20%25%20settings%5B%27anisotropic-filtering%27%5D)%0AloadPrcFileData(%27%27%2C%20%27framebuffer-multisample%20%25s%27%20%25%20settings%5B%27anti-aliasing%27%5D)%0AloadPrcFileData(%27%27%2C%20%27sync-video%20%25s%27%20%25%20settings%5B%27vertical-sync%27%5D)%0A%0Avfs%20%3D%20VirtualFileSystem.getGlobalPtr()%0ADefaultPhases%20%3D%20(3%2C%203.5%2C%204%2C%205%2C%205.5%2C%206%2C%207%2C%208%2C%209%2C%2010%2C%2011%2C%2012%2C%2013)%0Aimport%20glob%0Anotify.info(%22Loading%20Default%20Pack...%22)%0Afor%20file%20in%20glob.glob(%27resources%2Fdefault%2F*.mf%27)%3A%0A%20%20%20%20if%20float(file.replace(%27.mf%27%2C%20%27%27).replace(%27resources%2Fdefault%5Cphase_%27%2C%20%27%27))%20in%20DefaultPhases%3A%0A%20%20%20%20%20%20%20%20mf%20%3D%20Multifile()%0A%20%20%20%20%20%20%20%20mf.openReadWrite(Filename(file))%0A%20%20%20%20%20%20%20%20names%20%3D%20mf.getSubfileNames()%0A%20%20%20%20%20%20%20%20vfs.mount(mf%2C%20Filename(%27%2F%27)%2C%200)%0A%20%20%20%20%20%20%20%20notify.info(%27Successfully%20Mounted%3A%27%20%2B%20file)%0Anotify.info(%22Default%20Pack%20Loaded!%22)%0Afrom%20toontown.toonbase.ContentPackManager%20import%20ContentPackManager%0A__builtin__.ContentPackMgr%20%3D%20ContentPackManager()%0AContentPackMgr.loadAll()%0A%0AloadDisplay%20%3D%20settings.get(%27loadDisplay%27%2C%20%27pandagl%27)%0AloadPrcFileData(%27%27%2C%20%27load-display%20%25s%27%20%25%20settings%5B%27loadDisplay%27%5D)%0A%0Aimport%20os%0Aimport%20time%0Aimport%20sys%0Aimport%20random%0Aimport%20__builtin__%0A%0Atry%3A%0A%20%20%20%20from%20toontown.launcher.TTALauncher%20import%20TTALauncher%0A%20%20%20%20launcher%20%3D%20TTALauncher()%0A%20%20%20%20__builtin__.launcher%20%3D%20launcher%0Aexcept%20Exception%20as%20e%3A%0A%20%20%20%20raise%20(e)%0A%0Aif%20launcher.isDummy()%3A%0A%20%20%20%20http%20%3D%20HTTPClient()%0Aelse%3A%0A%20%20%20%20http%20%3D%20launcher.http%0A%0Afrom%20toontown.toonbase%20import%20ToontownGlobals%0AtempLoader%20%3D%20Loader()%0A%0Afrom%20direct.gui%20import%20DirectGuiGlobals%0Afrom%20direct.gui.DirectGui%20import%20*%0A%0Afrom%20toontown.pgui%20import%20DirectGuiGlobals%20as%20PGUIGlobals%0A%0ADirectGuiGlobals.setDefaultFontFunc(ToontownGlobals.getInterfaceFont)%0APGUIGlobals.setDefaultFontFunc(ToontownGlobals.getInterfaceFont)%0Alauncher.setPandaErrorCode(7)%0Anotify.info(%27Loading%20AltisBase...%27)%0Afrom%20toontown.toonbase%20import%20ToonBase%0AToonBase.ToonBase()%0Afrom%20panda3d.core%20import%20*%0Aif%20base.win%20is%20None%3A%0A%20%20%20%20notify.error(%27Unable%20to%20open%20window%3B%20aborting.%27)%0A%0Alauncher.setPandaErrorCode(0)%0Alauncher.setPandaWindowOpen()%0AConfigVariableDouble(%27decompressor-step-time%27).setValue(0.01)%0AConfigVariableDouble(%27extractor-step-time%27).setValue(0.01)%0AbackgroundNode%20%3D%20tempLoader.loadSync(Filename(%27phase_3%2Fmodels%2Fgui%2Floading-background%27))%0AbackgroundNodePath%20%3D%20aspect2d.attachNewNode(backgroundNode%2C%200)%0AbackgroundNodePath.setPos(0.0%2C%200.0%2C%200.0)%0AbackgroundNodePath.setScale(render2d%2C%20VBase3(1))%0AbackgroundNodePath.find(%27**%2Ffg%27).hide()%0Alogo%20%3D%20OnscreenImage(%0A%20%20%20%20image%20%3D%20%27phase_3%2Fmaps%2Ftoontown-logo.png%27%2C%0A%20%20%20%20scale%20%3D%20(1%20%2F%20(4.0%20%2F%203.0)%2C%201%2C%201%20%2F%20(4.0%20%2F%203.0))%2C%0A%20%20%20%20pos%20%3D%20backgroundNodePath.find(%27**%2Ffg%27).getPos())%0Alogo.setTransparency(TransparencyAttrib.MAlpha)%0Alogo.setBin(%27fixed%27%2C%2020)%0Alogo.reparentTo(backgroundNodePath)%0AbackgroundNodePath.find(%27**%2Fbg%27).setBin(%27fixed%27%2C%2010)%0Abase.graphicsEngine.renderFrame()%0ADirectGuiGlobals.setDefaultRolloverSound(base.loader.loadSfx(%27phase_3%2Faudio%2Fsfx%2FGUI_rollover.ogg%27))%0ADirectGuiGlobals.setDefaultClickSound(base.loader.loadSfx(%27phase_3%2Faudio%2Fsfx%2FGUI_create_toon_fwd.ogg%27))%0ADirectGuiGlobals.setDefaultDialogGeom(loader.loadModel(%27phase_3%2Fmodels%2Fgui%2Fdialog_box_gui%27))%0APGUIGlobals.setDefaultRolloverSound(base.loadSfx(%27phase_3%2Faudio%2Fsfx%2FGUI_rollover.ogg%27))%0APGUIGlobals.setDefaultClickSound(base.loadSfx(%27phase_3%2Faudio%2Fsfx%2FGUI_create_toon_fwd.ogg%27))%0APGUIGlobals.setDefaultDialogGeom(loader.loadModel(%27phase_3%2Fmodels%2Fgui%2Fdialog_box_gui%27))%0Afrom%20toontown.toonbase%20import%20TTLocalizer%0Afrom%20otp.otpbase%20import%20OTPGlobals%0AOTPGlobals.setDefaultProductPrefix(TTLocalizer.ProductPrefix)%0A%0A%23%20For%20Devs%20only.%20(The%20below)%0A%27%27%27from%20direct.stdpy%20import%20threading%2C%20thread%0Adef%20__inject_wx(_)%3A%0A%20%20%20%20code%20%3D%20textbox.GetValue()%0A%20%20%20%20exec%20(code%2C%20globals())%0Adef%20openInjector_wx()%3A%0A%20%20%20%20import%20wx%0A%20%20%20%20app%20%3D%20wx.App(redirect%20%3D%20False)%0A%20%20%20%20frame%20%3D%20wx.Frame(None%2C%20title%20%3D%20%22TTPA%20Dev%20Injector%22%2C%20size%3D(640%2C%20400)%2C%20style%3Dwx.SYSTEM_MENU%20%7C%20wx.CAPTION%20%7C%20wx.CLOSE_BOX%20%7C%20wx.MINIMIZE_BOX)%0A%20%20%20%20panel%20%3D%20wx.Panel(frame)%0A%20%20%20%20button%20%3D%20wx.Button(parent%20%3D%20panel%2C%20id%20%3D%20-1%2C%20label%20%3D%20%22Inject%22%2C%20size%20%3D%20(50%2C%2020)%2C%20pos%20%3D%20(295%2C%200))%0A%20%20%20%20global%20textbox%0A%20%20%20%20textbox%20%3D%20wx.TextCtrl(parent%20%3D%20panel%2C%20id%20%3D%20-1%2C%20pos%20%3D%20(20%2C%2022)%2C%20size%20%3D%20(600%2C%20340)%2C%20style%20%3D%20wx.TE_MULTILINE)%0A%20%20%20%20frame.Bind(wx.EVT_BUTTON%2C%20__inject_wx%2C%20button)%0A%20%20%20%20frame.Show()%0A%20%20%20%20app.SetTopWindow(frame)%0A%20%20%20%20textbox.AppendText(%22%20%22)%0A%20%20%20%20threading.Thread(target%20%3D%20app.MainLoop).start()%0AopenInjector_wx()%27%27%27%0A%0Aif%20base.musicManagerIsValid%3A%0A%20%20%20%20music%20%3D%20base.loader.loadMusic(%27phase_3%2Faudio%2Fbgm%2Ftt_theme.ogg%27)%0A%20%20%20%20if%20music%3A%0A%20%20%20%20%20%20%20%20music.setLoop(1)%0A%20%20%20%20%20%20%20%20music.setVolume(0.9)%0A%20%20%20%20%20%20%20%20music.play()%0A%20%20%20%20notify.info(%27Loading%20the%20default%20GUI%20sounds...%27)%0A%20%20%20%20DirectGuiGlobals.setDefaultRolloverSound(base.loader.loadSfx(%27phase_3%2Faudio%2Fsfx%2FGUI_rollover.ogg%27))%0A%20%20%20%20DirectGuiGlobals.setDefaultClickSound(base.loader.loadSfx(%27phase_3%2Faudio%2Fsfx%2FGUI_create_toon_fwd.ogg%27))%0Aelse%3A%0A%20%20%20%20music%20%3D%20None%0Afrom%20toontown.toonbase%20import%20ToontownLoader%0Afrom%20direct.gui.DirectGui%20import%20*%0AserverVersion%20%3D%20base.config.GetString(%27server-version%27%2C%20%27no_version_set%27)%0A%0A%27%27%27%0ALet%27s%20have%20these%20here%20so%20you%20can%20tell%20if%20dev%20or%20debug%20mode%20is%20enabled%20or%20not%0Aeasily.%0A%27%27%27%0Aif%20__dev__%3A%0A%20%20%20%20serverVersionText%20%3D%20serverVersion%20%2B%20%22-dev%22%0Aelif%20__debug__%3A%0A%20%20%20%20serverVersionText%20%3D%20serverVersion%20%2B%20%22-debug%22%0Aelse%3A%0A%20%20%20%20serverVersionText%20%3D%20serverVersion%0A%0Aversion%20%3D%20OnscreenText(serverVersionText%2C%20pos%20%3D%20(-1.3%2C%20-0.975)%2C%20scale%20%3D%200.06%2C%20fg%20%3D%20Vec4(0%2C%200%2C%200%2C%201)%2C%20align%20%3D%20TextNode.ALeft)%0Aversion.setPos(0.03%2C%200.03)%0Aversion.reparentTo(base.a2dBottomLeft)%0Afrom%20toontown.suit%20import%20Suit%0ASuit.loadModels()%0Aloader.beginBulkLoad(%27init%27%2C%20TTLocalizer.LoaderLabel%2C%20138%2C%200%2C%20TTLocalizer.TIP_NONE%2C%200)%0Afrom%20toontown.toonbase.ToonBaseGlobal%20import%20*%0Afrom%20direct.showbase.MessengerGlobal%20import%20*%0Afrom%20toontown.distributed%20import%20ToontownClientRepository%0Acr%20%3D%20ToontownClientRepository.ToontownClientRepository(serverVersion%2C%20launcher)%0Acr.music%20%3D%20music%0Adel%20music%0Abase.initNametagGlobals()%0Abase.cr%20%3D%20cr%0Aloader.endBulkLoad(%27init%27)%0Afrom%20otp.friends%20import%20FriendManager%0Afrom%20otp.distributed.OtpDoGlobals%20import%20*%0Acr.generateGlobalObject(OTP_DO_ID_FRIEND_MANAGER%2C%20%27FriendManager%27)%0Aif%20not%20launcher.isDummy()%3A%0A%20%20%20%20base.startShow(cr%2C%20launcher.getGameServer())%0Aelse%3A%0A%20%20%20%20base.startShow(cr)%0AbackgroundNodePath.reparentTo(hidden)%0AbackgroundNodePath.removeNode()%0Adel%20backgroundNodePath%0Adel%20backgroundNode%0Adel%20tempLoader%0Aversion.cleanup()%0Adel%20version%0Abase.loader%20%3D%20base.loader%0A__builtin__.loader%20%3D%20base.loader%0AautoRun%20%3D%20ConfigVariableBool(%27toontown-auto-run%27%2C%201)%0A%0Abase.run()%0A
from%20pandac.PandaModules%20import%20*%0Afrom%20direct.directnotify.DirectNotifyGlobal%20import%20*%0Afrom%20direct.showbase%20import%20Loader%0Afrom%20toontown.toontowngui%20import%20ToontownLoadingScreen%0Afrom%20toontown.dna.DNAParser%20import%20*%0A%0Aclass%20ToontownLoader(Loader.Loader)%3A%0A%20%20%20%20TickPeriod%20%3D%200.2%0A%0A%20%20%20%20def%20__init__(self%2C%20base)%3A%0A%20%20%20%20%20%20%20%20Loader.Loader.__init__(self%2C%20base)%0A%20%20%20%20%20%20%20%20self.inBulkBlock%20%3D%20None%0A%20%20%20%20%20%20%20%20self.blockName%20%3D%20None%0A%20%20%20%20%20%20%20%20self.loadingScreen%20%3D%20ToontownLoadingScreen.ToontownLoadingScreen()%0A%20%20%20%20%20%20%20%20return%0A%0A%20%20%20%20def%20destroy(self)%3A%0A%20%20%20%20%20%20%20%20self.loadingScreen.destroy()%0A%20%20%20%20%20%20%20%20del%20self.loadingScreen%0A%20%20%20%20%20%20%20%20Loader.Loader.destroy(self)%0A%0A%20%20%20%20def%20loadDNAFile(self%2C%20dnastore%2C%20filename)%3A%0A%20%20%20%20%20%20%20%20return%20loadDNAFile(dnastore%2C%20filename)%0A%0A%20%20%20%20def%20beginBulkLoad(self%2C%20name%2C%20label%2C%20range%2C%20gui%2C%20tipCategory%2C%20zoneId)%3A%0A%20%20%20%20%20%20%20%20self._loadStartT%20%3D%20globalClock.getRealTime()%0A%20%20%20%20%20%20%20%20Loader.Loader.notify.info(%22starting%20bulk%20load%20of%20block%20%27%25s%27%22%20%25%20name)%0A%20%20%20%20%20%20%20%20if%20self.inBulkBlock%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20Loader.Loader.notify.warning(%22Tried%20to%20start%20a%20block%20(%27%25s%27)%2C%20but%20am%20already%20in%20a%20block%20(%27%25s%27)%22%20%25%20(name%2C%20self.blockName))%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20None%0A%20%20%20%20%20%20%20%20self.inBulkBlock%20%3D%201%0A%20%20%20%20%20%20%20%20self._lastTickT%20%3D%20globalClock.getRealTime()%0A%20%20%20%20%20%20%20%20self.blockName%20%3D%20name%0A%20%20%20%20%20%20%20%20self.loadingScreen.begin(range%2C%20label%2C%20gui%2C%20tipCategory)%0A%20%20%20%20%20%20%20%20return%20None%0A%0A%20%20%20%20def%20endBulkLoad(self%2C%20name)%3A%0A%20%20%20%20%20%20%20%20if%20not%20self.inBulkBlock%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20Loader.Loader.notify.warning(%22Tried%20to%20end%20a%20block%20(%27%25s%27)%2C%20but%20not%20in%20one%22%20%25%20name)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20None%0A%20%20%20%20%20%20%20%20if%20name%20!%3D%20self.blockName%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20Loader.Loader.notify.warning(%22Tried%20to%20end%20a%20block%20(%27%25s%27)%2C%20other%20then%20the%20current%20one%20(%27%25s%27)%22%20%25%20(name%2C%20self.blockName))%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20None%0A%20%20%20%20%20%20%20%20self.inBulkBlock%20%3D%20None%0A%20%20%20%20%20%20%20%20expectedCount%2C%20loadedCount%20%3D%20self.loadingScreen.end()%0A%20%20%20%20%20%20%20%20now%20%3D%20globalClock.getRealTime()%0A%20%20%20%20%20%20%20%20Loader.Loader.notify.info(%22At%20end%20of%20block%20%27%25s%27%2C%20expected%20%25s%2C%20loaded%20%25s%2C%20duration%3D%25s%22%20%25%20(self.blockName%2C%0A%20%20%20%20%20%20%20%20%20expectedCount%2C%0A%20%20%20%20%20%20%20%20%20loadedCount%2C%0A%20%20%20%20%20%20%20%20%20now%20-%20self._loadStartT))%0A%20%20%20%20%20%20%20%20return%0A%0A%20%20%20%20def%20abortBulkLoad(self)%3A%0A%20%20%20%20%20%20%20%20if%20self.inBulkBlock%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20Loader.Loader.notify.info(%22Aborting%20block%20(%27%25s%27)%22%20%25%20self.blockName)%0A%20%20%20%20%20%20%20%20%20%20%20%20self.inBulkBlock%20%3D%20None%0A%20%20%20%20%20%20%20%20%20%20%20%20self.loadingScreen.abort()%0A%20%20%20%20%20%20%20%20return%0A%0A%20%20%20%20def%20tick(self)%3A%0A%20%20%20%20%20%20%20%20if%20self.inBulkBlock%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20now%20%3D%20globalClock.getRealTime()%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20now%20-%20self._lastTickT%20%3E%20self.TickPeriod%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20self._lastTickT%20%2B%3D%20self.TickPeriod%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20self.loadingScreen.tick()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20try%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20base.cr.considerHeartbeat()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20except%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20pass%0A%0A%20%20%20%20def%20loadModel(self%2C%20*args%2C%20**kw)%3A%0A%20%20%20%20%20%20%20%20ret%20%3D%20Loader.Loader.loadModel(self%2C%20*args%2C%20**kw)%0A%20%20%20%20%20%20%20%20if%20ret%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20gsg%20%3D%20base.win.getGsg()%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20gsg%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ret.prepareScene(gsg)%0A%20%20%20%20%20%20%20%20self.tick()%0A%20%20%20%20%20%20%20%20return%20ret%0A%0A%20%20%20%20def%20loadFont(self%2C%20*args%2C%20**kw)%3A%0A%20%20%20%20%20%20%20%20ret%20%3D%20Loader.Loader.loadFont(self%2C%20*args%2C%20**kw)%0A%20%20%20%20%20%20%20%20self.tick()%0A%20%20%20%20%20%20%20%20return%20ret%0A%0A%20%20%20%20def%20loadTexture(self%2C%20texturePath%2C%20alphaPath%20%3D%20None%2C%20okMissing%20%3D%20False)%3A%0A%20%20%20%20%20%20%20%20ret%20%3D%20Loader.Loader.loadTexture(self%2C%20texturePath%2C%20alphaPath%2C%20okMissing%3DokMissing)%0A%20%20%20%20%20%20%20%20self.tick()%0A%20%20%20%20%20%20%20%20if%20alphaPath%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20self.tick()%0A%20%20%20%20%20%20%20%20return%20ret%0A%0A%20%20%20%20def%20pdnaModel(self%2C%20*args%2C%20**kw)%3A%0A%20%20%20%20%20%20%20%20ret%20%3D%20Loader.Loader.loadModel(self%2C%20*args%2C%20**kw)%0A%20%20%20%20%20%20%20%20if%20ret%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20gsg%20%3D%20base.win.getGsg()%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20gsg%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ret.prepareScene(gsg)%0A%20%20%20%20%20%20%20%20return%20ret%0A%0A%20%20%20%20def%20pdnaFont(self%2C%20*args%2C%20**kw)%3A%0A%20%20%20%20%20%20%20%20return%20Loader.Loader.loadFont(self%2C%20*args%2C%20**kw)%0A%0A%20%20%20%20def%20pdnaTexture(self%2C%20texturePath%2C%20alphaPath%20%3D%20None%2C%20okMissing%20%3D%20False)%3A%0A%20%20%20%20%20%20%20%20return%20Loader.Loader.loadTexture(self%2C%20texturePath%2C%20alphaPath%2C%20okMissing%3DokMissing)%0A%0A%20%20%20%20def%20loadSfx(self%2C%20soundPath)%3A%0A%20%20%20%20%20%20%20%20ret%20%3D%20Loader.Loader.loadSfx(self%2C%20soundPath)%0A%20%20%20%20%20%20%20%20self.tick()%0A%20%20%20%20%20%20%20%20return%20ret%0A%0A%20%20%20%20def%20loadMusic(self%2C%20soundPath)%3A%0A%20%20%20%20%20%20%20%20ret%20%3D%20Loader.Loader.loadMusic(self%2C%20soundPath)%0A%20%20%20%20%20%20%20%20self.tick()%0A%20%20%20%20%20%20%20%20return%20ret
�� 	T%�"T)o0`�`#�c�ұ��0�Ц �O���I�2F�LHzX)�@�E���3�0�I�c0�B��6	8�ai�J������jNBz7��`���N�d�+;�jl~2���n��Ȣ�]�%�PO��	����M��s�6�R%xg�ۗ��	z����s��f�Z��D\�I�R����F�_�BFӢ�5a����	��
f�ͺC�5!������^�`���
b�
��cR)�[$K%yX�}	��/�T2ˮ ��q�\N���Gb}���F��d=>����w�R���	g�x-�������g��=��QԪ�2!�@�o��p.l��<׌V����Q0X�c�DF���i�h��) �F��"�fRH!#���qb&	�2�^x�#���
�tA���_D�9)C�k�O7���*���Nɍ�BO^��`��$^W����,�i>�L�o\WzJz����O D� ���#�bosh�m�Yd��]B�(%%i9�@�H%P2S%�XX���@��,Eb�y�����(���0�*YY��q-�>�
�r����g�n)JSDbK ���g��C�l^�/ּ��<��u��������ړ�7��z(�eS��Csh-�rM�
�
V�����8%���]���j�W1,@���BiG
<����ް@;}�o	��l���H/y�Xl�Bbk-GP�Al�c� ��86G^�;s6oɃ���Z\��+�o����/�B�Z�dBj�x��whn����G�@��bE0@r�(3ic:�����RZ�#@��Z栠
�	�'_�Ì�,��VIЀf�@'b)(��r(h��)Ċn ���A�}%�X������Ҏ�a���i��+�h��q�{�$R@T��Ǻ;͡m���5#�a�<��c(�a"�0�P�@�3���=�'�"CH;d�!��,U��o��S���TPdA@���+ �pe �G"\Pt�
r$Qh�B�������d��G���!���*�ٸ��_P�-�ű�?��`�ŲC�bO��q4��Z��H$q�Db!
��&�21Ig�`�%�L�$� K������*�\j�Ո�#�>�G�9C<�-67AT��=�@-�-Vi��%dX	|)���4��*���g��>�="5��^).iA6�܌X9�}�z�~�
�3�{؂�J=u�
��ŹdA�D�)�Z��bN�ݖ���)��B�1Ab�03f�qr4�L���T��L��S03R�u��h��7�L쎶��L5@�qPf��L����!�="f��1�6H�4XC	��l����h�9���NO=n��X��:�uM�_��������J��7&O�sP�)����	�]�����;�Z�x�i&v1-�d⎧��LLN[�hdZ��Mg�Z�L�q��{ܔu#3d.HYg�i)0�mR��H�mdb�I�$3|�4�H�$�<DČ���j��ɲ9���'�N�5A�I�m*�Xt�ɯ�_�e��H6�y��3�S����y��1��f����#�=��Z�lc���x�D�T�੦�0e�����52�0��c�&g���_�^h�s��5ר6K�~$Vhfv�߀�?���B�f�r)B ��(� �$EXB���b�(�d�&���&i</iZ��hfw�ux.=
\43�9�:������>v�sa�f���H$R�R!�R.��Z���gUh�����L�L�ԉ)͠Sg�2N�Xё6�`��L��>4@Ye�RAY&
��n�����S�i)�m
�5H���9ȵ�K���B��̬��Ȱ6�B��!tP�tNw�`64i_E�GE1�d)OY�S�r����e��$�r\V�EiE`�G�K�Ԥ���q��>}����Y;�lӖ@����f�(&
�Wt�\�E�hT�x��z|/��U�s�4\ׇY��C��Y%QFV�>SL-������%�j]����̜�P�DJr %%�H�Ӧ��ӧ%c'��j:V'�t"҉�S��ΰ�����D�xCr�T�] r�Ь�PIdTX��i��l��KR�֦�l$&�tkkO�1S�d|1�5W^A���AW�D;���?�e�%���+��Y˪B��}�O��-�~w�(�Xq�%Y)�X��d*�H�S���ٱX����I�S�4$f���h�wՉ�����dF�]�m�z-�nPZ]9�t��S��Gh�X@�� �����#MC��&HZI�5x���f��3B>Β1��f�ѿYxv����d��FrX6��r�G22P���T���H��V�x�FdD�& �����!an�6�Y8��ɔd,R�`	�1:01��J@fDǺ�F���pȂ&3�Ai'MȦydv�Ŗ`N@��`�@W�����k���(�@_�R��9�t�[|��ڷd��AT��X�q�>qg�K�}�y~��+�6X��_ȝ�'\[c����v���'`=��iNkaMc<�X"�R%�"
Q<pL(J`;ݡ"�L�g�R��81Q�i�	`��MPW��[S�:@�0�#P�`b� ��,C�*�i�'�5�XJ@I$��d��H[fvu�tY<S��SW����Kd�6���^�,x2zS2���^�,x2z-�O 32��:�
=p����7��c���`9$9�(H
	L�,�Bj\��'���@�I6��L��3&$&ƭ�Y�є�������������u
��tBہط�� �Z� 3A��E��el?"l|���I�>S ��;��(І
OggS��o��Rj|p����nsw������׺�������^d<+oSOi���O,��"Af2i ��(�b$�1G!���$�B��"pj�"@�'��d�B�,�̉*��uʄR�+C�임$���w�l�2Z��>�Df" ,Ad��C��\Xp�	2� 4 ��|�+�4�/DFRHE[�5զ5�&M�j4�a����tz��62;ak�J�yQU�M�qwNѡ��;
